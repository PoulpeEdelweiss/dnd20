<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>D20 –ö—É–±–∏–∫</title>
  <style>
    body {
      margin: 0;
      background: #111827;
      color: white;
      font-family: sans-serif;
      text-align: center;
    }
    canvas {
      background: #1f2937;
      display: block;
      margin: 40px auto;
      border-radius: 20px;
    }
    button {
      font-size: 20px;
      padding: 12px 30px;
      background-color: #3b82f6;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    button:hover {
      background-color: #2563eb;
    }
    .result {
      margin-top: 10px;
      font-size: 28px;
      color: #facc15;
    }
  </style>
</head>
<body>
  <div class="dice">üé≤</div>

  <canvas id="canvas" width="500" height="500"></canvas>
  <br />

  <button onclick="rollDice()">–ë—Ä–æ—Å–∏—Ç—å D20</button>
  <div class="result" id="result">–†–µ–∑—É–ª—å—Ç–∞—Ç: -</div>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const resultEl = document.getElementById('result');

const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const TRIANGLE_SIZE = 90;

    // –†–∏—Å—É–µ—Ç –æ–¥–Ω—É –≥—Ä–∞–Ω—å-—Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫
    function drawFace(cx, cy, size, rotation, color, number) {
      const points = [];
      for (let i = 0; i < 3; i++) {
        const angle = (Math.PI * 2 / 3) * i + rotation;
        const x = cx + Math.cos(angle) * size;
        const y = cy + Math.sin(angle) * size;
        points.push({ x, y });
      }

      ctx.beginPath();
      ctx.moveTo(points[0].x, points[0].y);
      ctx.lineTo(points[1].x, points[1].y);
      ctx.lineTo(points[2].x, points[2].y);
      ctx.closePath();
      ctx.fillStyle = color;
      ctx.fill();
      ctx.strokeStyle = '#000';
      ctx.lineWidth = 1.5;
      ctx.stroke();

      // –ù–æ–º–µ—Ä
      const textX = (points[0].x + points[1].x + points[2].x) / 3;
      const textY = (points[0].y + points[1].y + points[2].y) / 3;
      ctx.fillStyle = '#fff';
      ctx.font = 'bold 22px sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(number, textX, textY);
    }

    function drawDice(numbers) {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –≥—Ä–∞–Ω—å
      drawFace(centerX, centerY, TRIANGLE_SIZE, Math.PI, '#3b82f6', numbers[0]);

      const offset = 100;
      const small = TRIANGLE_SIZE * 0.8;
      const dark = '#1e40af';
      const mid = '#2563eb';

      // –í–µ—Ä—Ö–Ω–∏–µ 3 –≥—Ä–∞–Ω–∏
      drawFace(centerX, centerY - offset, small, Math.PI, mid, numbers[1]);
      drawFace(centerX - offset * 0.8, centerY - offset * 0.6, small, Math.PI * 1.1, mid, numbers[2]);
      drawFace(centerX + offset * 0.8, centerY - offset * 0.6, small, Math.PI * 0.9, mid, numbers[3]);

      // –ë–æ–∫–æ–≤—ã–µ 3 –≥—Ä–∞–Ω–∏
      drawFace(centerX - offset * 1.1, centerY, small, Math.PI * 1.4, dark, numbers[4]);
      drawFace(centerX + offset * 1.1, centerY, small, Math.PI * 1.6, dark, numbers[5]);
      drawFace(centerX, centerY + offset * 0.2, small, 0, mid, numbers[6]);

      // –ù–∏–∂–Ω–∏–µ 3 –≥—Ä–∞–Ω–∏
      drawFace(centerX, centerY + offset, small, 0, mid, numbers[7]);
      drawFace(centerX - offset * 0.8, centerY + offset * 0.7, small, Math.PI * 1.2, dark, numbers[8]);
      drawFace(centerX + offset * 0.8, centerY + offset * 0.7, small, Math.PI * 0.8, dark, numbers[9]);
    }

    function rollDice() {
      const numbers = [];
      while (numbers.length < 10) {
        const n = Math.floor(Math.random() * 20) + 1;
        if (!numbers.includes(n)) numbers.push(n);
      }
      resultEl.textContent = `–†–µ–∑—É–ª—å—Ç–∞—Ç: ${numbers[0]}`;
      drawDice(numbers);
    }

    rollDice(); // –Ω–∞—á–∞–ª—å–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞
  </script>
</body>
</html>